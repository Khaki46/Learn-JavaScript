<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Type of data</title>
</head>
<body>
    <script>
        "use strict"
        let john = {
            name : "John",
            sayHi : ()=>{
                console.log("Hello"+" After using toUpperCase()"+" Hello".toUpperCase());
            }
        }
        john.sayHi();
        let num = 1.23456;
        console.log("use toFixed():"+num.toFixed());
        console.log("use toFixed(2):"+num.toFixed(2));
        console.log("use "+ Math.floor(num*100000));

        let billion = 1e9;
        let ms = 1e-6;
        console.log("一亿："+billion);
        console.log("一微秒："+ms);

        console.log("num:"+num);
        console.log("floor()向下舍入："+Math.floor(num));
        console.log("ceil()向上舍入"+Math.ceil(num));
        console.log("round()四舍五入"+Math.round(num));

        //浮点计算
        console.log(0.1+0.2==0.3);
        console.log((0.1+0.2).toFixed(2)==0.3);

        // 检测是否为常规数字
        // let enterNum = +prompt("Enter a number");
        // if(isFinite(enterNum)){
        //     console.log(enterNum);
        // }else{
        //     console.log("Not a number");
        // }

        // 提取数字 parseInt返回整数 parseFloat 返回浮点数
        console.log( parseInt("233.3test"));
        console.log( parseFloat("233.3test"));
        
        // 随机数
        console.log((Math.random()*10).toFixed());
        console.log(Math.round(Math.random()*10));


        let numArr = [1,-32,-4,2,-6,-76,34,65,32];
        console.log(numArr);
        console.log(Math.min.apply(null,numArr));
        console.log(Math.max.apply(null,numArr));



        function readNumber() {
            let readNum;              
            do {
                readNum = +prompt("Enter a number");                
            } while (!isFinite(readNum));
            if(readNum ==" "){
                return null;
            }
            console.log(readNum);
        }
        // readNumber();

        // 字符串

        let largeStr = "HEllO";
        console.log(largeStr.toLowerCase());
        console.log(largeStr.toUpperCase());

        //查找子字符串
        let findStr = "Widget with id";
        //使用indexOf 返回找到的字符位置
        console.log(findStr.indexOf("with"));
        console.log(findStr.indexOf("id"));
        console.log(findStr.indexOf("id",2));
        
        //includes 返回true/false
        console.log(findStr.includes("id"));
        
        console.log(findStr.startsWith("Widget"));
        console.log(findStr.endsWith("id"));

        console.log(findStr.slice(0,6));

        // 首字母大写
        function ucFirst(str) {
            return str[0].toUpperCase() + str.slice(1);
        }
        console.log(ucFirst("first"));

        //检测字符
        function checkSpam(str) {
            // if(str.toLowerCase().includes("viagra") || str.toLowerCase().includes("xxx")) return true;
            // else return false;
            const lowerStr = str.toLowerCase();
            return lowerStr.includes("viagra") || lowerStr.includes("xxx");
        }
        console.log(checkSpam("fuidfej viagra kjid"));

        function truncate(str, maxlength) {
            if(str.length>=maxlength){
                return str.slice(0,maxlength) + "...";
            }else{
                return str;
            }
        }
        console.log(truncate("This is a test yes just a test",10));

        function extractCurrencyValue(str){
            return +str.slice(1);
        }
        console.log(extractCurrencyValue("$233")==233);

        //数组
        let arrOnA = new Array();
        let arrOnB = [];

        let fruits = [
            "Apple",
            "Orange",
            "Pear"
            
        ];
        console.log(fruits.pop());//删除并返回数组最后一个元素
        //从尾部添加一个元素
        fruits.push("Pear")
        console.log(fruits);

        console.log(fruits.shift());//删除并返回数组第一个元素
        //从头部添加一个元素
        fruits.unshift("Apple");
        console.log(fruits);
        //for in 遍历 key （通常不使用 for in遍历数组）
        for (const key in fruits) {
            console.log("for in: "+fruits[key]);
        }        
        // for of 遍历 value
        for (const iterator of fruits) {
            console.log("for of: "+iterator);
        }
        //forEach 遍历
        fruits.forEach(element => {
            console.log("forEach: "+element);
        });

        //数组操作
        let styles = [
            "Jazz",
            "Blues"
        ];
        styles.push("Rock-n-Roll");
        console.log(styles);
        styles[1]="Classics";
        console.log(styles);
        console.log(styles.shift());
        console.log(styles);
        styles.unshift("Rap","Reggae");
        console.log(styles);

        // 输入数字求和
        function sumInput() {
            let arrNum = [];
            let sum = 0;
            while (true) {
                // let num = +prompt("Enter a number"); 执行+prompt 后isFinite无法判断空字符和数字0
                let num = prompt("Enter a number",0);

                if(num == " " || num == null || !isFinite(num)) break;

                arrNum.push(+num);
            }
            console.log(arrNum);
            for (const iterator of arrNum) {
                sum += iterator;
            }
            return sum;
        }
        // console.log(sumInput());

        //数组方法
        let arr = [
            "I",
            "study",
            "javascript"
        ];
        // delete arr[0];
        console.log(arr.length);
        arr.splice(0,2,"haha","lala","wuwu");
        console.log(arr);
        let newArr = arr.slice(0,arr.length);
        console.log(newArr);

        console.log(arr.concat(fruits,newArr));
        let userName = [
            "john",
            "mike",
            "niger",
            "wabibabu"
        ];
        console.log(userName);
        let findArr = userName.find(item => item.length<5);
        console.log("findArr"+findArr);

        let filterArr = userName.filter(item => item.length<5);
        console.log(filterArr);
        let mapArr = userName.map (item => item.length);
        console.log(mapArr);

        let numberArr = [
            "2",
            "23",
            "12",
            "24",
            "13",
            "43"
        ];
        // 颠倒顺序
        console.log(numberArr);
        console.log(numberArr.reverse());
        // 排序
        console.log(numberArr.sort((a, b) => {
            return a-b;
        }));
        console.log(numberArr.sort((a, b) => {
            return b-a;
        }));
        // 将字符串转化为数组
        let nameStr = "Bilbo,Gandalf ,Nazgul";
        console.log(nameStr.split(','));
        // 将数组转化为字符串
        let nameArr = [
            "Bilob",
            "Gandalf",
            "Nazgul"
        ];
        console.log(nameArr.join());
        // 使用reduce计算和
        console.log(numberArr.reduce((sum, item) => sum+ +item ,0));
        // 判断是否为数组
        console.log(Array.isArray(nameArr));
        console.log(Array.isArray(nameStr));
        
        // 数组任务
        // 将test-test-test 的-删除并返回成驼峰写法
        function camelize(str) {
            return str
            .split('-')
            .map(
                (item, index) => index==0 ? item : item[0].toUpperCase()+item.slice(1)
            )
            .join("");
            
        }
        console.log(camelize("test-test"));
        // 返回大于等于a小于等于b的数组
        function filterRange(arr, a, b) {
            return arr.filter((item) =>
                item>=a && item<=b
            )
        }
        console.log(filterRange(numberArr,3,20));

        //返回a到b之间的数组 
        let filterRangeArr = [
            "8",
            "1",
            "3",
            "5",
            "7",
            "4",
            "2",
            "6"
        ]
        function filterRangeInPlace(arr, a, b) {
            for (let index = 0; index < arr.length; index++) {
                const element = arr[index];
                if(element<a || element>b) {
                    arr.splice(index,1);
                    index--;
                }
            }
        }
        filterRangeInPlace(filterRangeArr,3,5);
        console.log(filterRangeArr);

        //将数字降序排列 
        let sortArr = [
            "8",
            "1",
            "3",
            "5",
            "7",
            "4",
            "2",
            "6"
        ]
        console.log(sortArr.sort((a, b) => {
            return b-a;
        }));

        let w3cArr = ["HTML", "JavaScript", "CSS"];
        function copySorted(arr) {
            return arr.slice().sort();
        }
        console.log(copySorted(w3cArr));
        console.log(w3cArr);
        //根据年龄对数组排序
        let johnn = { name: "Johnn", age: 25 };
        let pete = { name: "Pete", age: 30 };
        let mary = { name: "Mary", age: 28 };

        let humanArr = [ pete, johnn, mary ];

        function sortByAge(arr) {
            return arr.sort((a, b) => {
                return a.age-b.age;
            })
        }
        sortByAge(humanArr);
        console.log(humanArr[0]);
        // 迭代for of
        let range = {
            from: 1,
            to: 5
        };
        range[Symbol.iterator] = function () {
            return{
                current : this.from,
                last : this.to,

                next(){
                    if(this.current <= this.last){
                        return { done: false , value:this.current++};
                    }else{
                        return {done:true};
                    }
                }
            }
        };
        for (const iterator of range) {
            console.log(iterator);
        }
        // Map与对象一样但是可以使用任何类型的键（key）
        let map = new Map();
        map.set('1', "str1");
        map.set(1, "num1");
        map.set(true, "bool1");

        console.log(map.get('1'));
        console.log(map.get(1));
        console.log(map.get(true));
        console.log(map.size);
        // Map可以把对象作为键
        let obJohn = {name:"john"};
        let visitsCountMap = new Map();

        visitsCountMap.set(obJohn,"obJohn");
        console.log(visitsCountMap.get(obJohn));
        console.log(map.keys());
        console.log(map.values());
        console.log(map.entries());

        let map1 = new Map([
            ['1',  'str1'],
            [1,    'num1'],
            [true, 'bool1']
        ]);
        console.log(map1.get('1'));
        
        //Set是一个特殊的合集，值的合集没有键，每个值只出现一次
        let set = new Set();
        set.add("test");
        set.add("test2");
        set.add("test");//test只出现一次
        set.add("test4");
        for (const iterator of set) {
            console.log(iterator);
        }
        // 属性求和 使用 Object.values 和 for..of 循环返回所有薪水的总和。
        let salaries = {
            "John": 100,
            "Pete": 300,
            "Mary": 250
        }
        let sum = 0;
        function sumSalaries(salaries) {
            for (const iterator of Object.values(salaries)) {
                sum+=iterator;
            }
            return sum;
        }
        console.log(sumSalaries(salaries));
        // 计算属性数量
        function count(obj) {
            return Object.keys(obj).length;
        }
        console.log(count(salaries));
        
        let json = JSON.stringify(salaries);
        console.log(json);
        
        let order = JSON.parse(json);
        console.log(order);
    
    </script>
</body>
</html>